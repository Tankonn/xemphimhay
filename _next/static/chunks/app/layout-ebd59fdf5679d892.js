(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{13020:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6874,23)),Promise.resolve().then(t.t.bind(t,62093,23)),Promise.resolve().then(t.t.bind(t,27735,23)),Promise.resolve().then(t.t.bind(t,30347,23)),Promise.resolve().then(t.bind(t,94615))},30347:()=>{},94615:(e,r,t)=>{"use strict";t.d(r,{default:()=>N});var s=t(95155),a=t(11518),o=t.n(a),l=t(12115),i=t(6874),n=t.n(i),d=t(70366),c=t(16428),m=t(30662),x=t(75032),u=t(26186),p=t(16278),h=t(50274),b=t(13993),g=t(27540),f=t(16243),j=t(65803),y=t(97555),v=t(35695);let N=()=>{let[e,r]=(0,l.useState)(!1),[t,a]=(0,l.useState)(""),[i,N]=(0,l.useState)(!1),[w]=d.A.useForm(),[A,k]=(0,l.useState)(!1),F=(0,v.useRouter)(),[E,S]=(0,l.useState)(!1),I=(0,l.useCallback)(async e=>{try{let r=await fetch("https://webxemphim-4vr4.onrender.com//auth/profile",{headers:{Authorization:"Bearer ".concat(e)}});if(r.ok){let e=await r.json();a(e.username||"User"),localStorage.setItem("username",e.username),e._id&&localStorage.setItem("userId",e._id),w.setFieldsValue({username:e.username,email:e.email,bio:e.bio})}}catch(e){console.error("Error fetching user profile:",e),a("User")}},[w]);(0,l.useEffect)(()=>{let e=localStorage.getItem("token");if(e){r(!0);let t=localStorage.getItem("username");t?a(t):I(e)}},[I]);let C=async e=>{try{k(!0);let t=localStorage.getItem("token");if(!t)return void c.Ay.error("Please login again");let s=await fetch("https://webxemphim-4vr4.onrender.com//users/profile",{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok){let e=await s.json();if(e.success)c.Ay.success("Profile updated successfully"),localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("userId"),r(!1),a(""),N(!1),window.location.reload(),F.push("/login");else throw Error(e.message||"Failed to update profile")}else{let e=await s.json();throw Error(e.message||"Failed to update profile")}}catch(e){console.error("Error updating profile:",e),c.Ay.error(e instanceof Error?e.message:"Failed to update profile")}finally{k(!1)}},P=()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),r(!1),a(""),window.location.reload()};return(0,l.useEffect)(()=>(E?document.body.classList.add("menu-open"):document.body.classList.remove("menu-open"),()=>{document.body.classList.remove("menu-open")}),[E]),(0,l.useEffect)(()=>{let e=e=>{let r=e.target;E&&!r.closest(".group")&&S(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[E]),(0,s.jsxs)("header",{className:"jsx-129427d887d0cb13 bg-gray-900 border-b border-gray-800",children:[(0,s.jsx)("div",{className:"jsx-129427d887d0cb13 container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"jsx-129427d887d0cb13 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"jsx-129427d887d0cb13 flex items-center",children:[(0,s.jsx)(n(),{href:"/home",className:"text-red-500 font-bold text-2xl",children:"ANIME"}),(0,s.jsx)("nav",{className:"jsx-129427d887d0cb13 hidden md:flex ml-8 space-x-1"})]}),(0,s.jsx)("div",{className:"jsx-129427d887d0cb13 flex items-center space-x-4",children:e?(0,s.jsx)("div",{className:"jsx-129427d887d0cb13 flex items-center space-x-3",children:(0,s.jsxs)("div",{className:"jsx-129427d887d0cb13 "+"relative group ".concat(E?"is-open":""),children:[(0,s.jsxs)(m.Ay,{type:"text",className:"flex items-center space-x-2 px-3 py-1.5 bg-gray-800 hover:bg-gray-700 rounded-lg transition-all duration-200 border border-gray-700 group-hover:border-red-500",onClick:()=>{S(!E)},"aria-expanded":E,children:[(0,s.jsx)(x.A,{icon:(0,s.jsx)(h.A,{}),className:"bg-red-500 group-hover:scale-110 transition-transform",size:"small"}),(0,s.jsx)("span",{className:"jsx-129427d887d0cb13 text-white font-medium group-hover:text-red-500 transition-colors",children:t||"User"}),(0,s.jsx)("div",{className:"jsx-129427d887d0cb13 absolute -bottom-1 left-0 w-full h-0.5 bg-red-500 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left"})]}),(0,s.jsx)("div",{className:"jsx-129427d887d0cb13 "+"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-lg border border-gray-700 transition-all duration-200 z-50 \n                    sm:w-56 \n                    max-h-[calc(100vh-100px)] overflow-y-auto\n                    sm:right-0 sm:mt-2\n                    md:right-0 md:mt-2\n                    lg:right-0 lg:mt-2\n                    ".concat(E?"opacity-100 visible transform-none":"opacity-0 invisible translate-y-2"),children:(0,s.jsxs)("div",{className:"jsx-129427d887d0cb13 py-1",children:[(0,s.jsxs)(n(),{href:"/profile",className:"flex items-center px-4 py-3 text-base text-gray-200 hover:bg-gray-700 hover:text-red-500 transition-colors duration-200",onClick:()=>S(!1),children:[(0,s.jsx)(h.A,{className:"mr-3 text-lg"}),(0,s.jsx)("span",{className:"jsx-129427d887d0cb13 font-medium",children:"My Profile"})]}),(0,s.jsxs)("button",{onClick:()=>{S(!1),N(!0)},className:"jsx-129427d887d0cb13 w-full flex items-center px-4 py-3 text-base text-gray-200 hover:bg-gray-700 hover:text-red-500 transition-colors duration-200",children:[(0,s.jsx)(b.A,{className:"mr-3 text-lg"}),(0,s.jsx)("span",{className:"jsx-129427d887d0cb13 font-medium",children:"Edit Profile"})]}),(0,s.jsxs)("button",{onClick:()=>{S(!1),P()},className:"jsx-129427d887d0cb13 w-full flex items-center px-4 py-3 text-base text-gray-200 hover:bg-red-500 hover:text-white border-t border-gray-700 transition-colors duration-200",children:[(0,s.jsx)(g.A,{className:"mr-3 text-lg"}),(0,s.jsx)("span",{className:"jsx-129427d887d0cb13 font-medium",children:"Sign Out"})]})]})})]})}):(0,s.jsxs)("div",{className:"jsx-129427d887d0cb13 flex items-center space-x-2",children:[(0,s.jsx)(m.Ay,{type:"text",onClick:()=>F.push("/login"),className:"flex items-center space-x-2 px-4 py-1.5 text-white hover:text-red-500 bg-gray-800 hover:bg-gray-700 rounded-lg transition-all duration-200 border border-gray-700 hover:border-red-500",icon:(0,s.jsx)(f.A,{className:"text-lg"}),children:(0,s.jsx)("span",{className:"jsx-129427d887d0cb13",children:"Sign In"})}),(0,s.jsx)(m.Ay,{type:"text",onClick:()=>F.push("/register"),className:"flex items-center space-x-2 px-4 py-1.5 text-white bg-red-500 hover:bg-red-600 rounded-lg transition-all duration-200 border-none shadow-md hover:shadow-lg hover:shadow-red-500/30",icon:(0,s.jsx)(j.A,{className:"text-lg"}),children:(0,s.jsx)("span",{className:"jsx-129427d887d0cb13",children:"Sign Up"})})]})})]})}),(0,s.jsx)(u.A,{title:"Edit Profile",open:i,onCancel:()=>N(!1),footer:null,className:"edit-profile-modal",children:(0,s.jsxs)(d.A,{form:w,layout:"vertical",onFinish:C,className:"mt-4",children:[(0,s.jsx)(d.A.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please input your username!"}],children:(0,s.jsx)(p.A,{prefix:(0,s.jsx)(h.A,{}),placeholder:"Username"})}),(0,s.jsx)(d.A.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please enter a valid email!"}],children:(0,s.jsx)(p.A,{prefix:(0,s.jsx)(y.A,{}),placeholder:"Email"})}),(0,s.jsx)(d.A.Item,{name:"bio",label:"Bio",children:(0,s.jsx)(p.A.TextArea,{placeholder:"Tell us about yourself...",rows:4})}),(0,s.jsxs)(d.A.Item,{className:"mb-0 flex justify-end",children:[(0,s.jsx)(m.Ay,{onClick:()=>N(!1),className:"mr-2",children:"Cancel"}),(0,s.jsx)(m.Ay,{type:"primary",htmlType:"submit",loading:A,children:"Save Changes"})]})]})}),(0,s.jsx)(o(),{id:"129427d887d0cb13",children:".edit-profile-modal .ant-modal-content{background-color:#1F2937;border:1px solid#374151}.edit-profile-modal .ant-modal-header{background-color:#1F2937;border-bottom:1px solid#374151}.edit-profile-modal .ant-modal-title{color:#F3F4F6}.edit-profile-modal .ant-modal-close{color:#F3F4F6}.edit-profile-modal .ant-form-item-label>label{color:#F3F4F6}.edit-profile-modal .ant-input,.edit-profile-modal .ant-input-textarea{background-color:#374151;border-color:#4B5563;color:#F3F4F6}.edit-profile-modal .ant-input:hover,.edit-profile-modal .ant-input:focus,.edit-profile-modal .ant-input-textarea:hover,.edit-profile-modal .ant-input-textarea:focus{border-color:#EF4444}.edit-profile-modal .ant-btn-primary{background-color:#EF4444;border-color:#EF4444}.edit-profile-modal .ant-btn-primary:hover{background-color:#DC2626;border-color:#DC2626}"})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[360,275,48,183,217,278,417,614,763,441,684,358],()=>r(13020)),_N_E=e.O()}]);